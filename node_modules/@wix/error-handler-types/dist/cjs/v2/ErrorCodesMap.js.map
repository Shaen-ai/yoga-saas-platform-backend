{"version":3,"names":[],"sources":["../../../src/v2/ErrorCodesMap.ts"],"sourcesContent":["import { StatusCode } from '../types/StatusCode';\nimport { ShowErrorProps } from './ShowError';\nimport { ApplicationError, FieldViolationBase } from '../types';\n\nexport interface ErrorMetaResponse {\n  __applicationErrorsType?: ApplicationError;\n  __validationErrorsType?: FieldViolationBase;\n}\n\nexport type ShowErrorMapFunction = (error: Error | null) => ShowErrorProps;\n\nexport type StatusCodeMap = Partial<Record<StatusCode, ShowErrorMapFunction>>;\n\nexport type ErrorCodesMapUntyped = Partial<\n  Record<string, ShowErrorMapFunction | false>\n>;\n\nexport type ApplicationErrorsMap<\n  TApplicationError extends ApplicationError = ApplicationError,\n> = {\n  [K in NonNullable<TApplicationError['code']>]?: ShowErrorMapFunction | false;\n} & {\n  [key: string]: ShowErrorMapFunction | false;\n};\n\nexport type ValidationErrorsMap<\n  TFieldViolation extends FieldViolationBase = FieldViolationBase,\n> = {\n  [K in NonNullable<TFieldViolation['ruleName']>]?:\n    | ShowErrorMapFunction\n    | false;\n} & {\n  [key: string]: ShowErrorMapFunction | false;\n};\n\nexport type ErrorCodesMapConditionalApplicationError<\n  T extends ErrorMetaResponse,\n> = NonNullable<\n  NonNullable<T['__applicationErrorsType']>['code']\n> extends string\n  ? ApplicationErrorsMap<NonNullable<T['__applicationErrorsType']>>\n  : ErrorCodesMapUntyped;\n\nexport type ErrorCodesMapConditionalValidationError<\n  T extends ErrorMetaResponse,\n> = NonNullable<\n  NonNullable<T['__validationErrorsType']>['ruleName']\n> extends string\n  ? ValidationErrorsMap<NonNullable<T['__validationErrorsType']>>\n  : ErrorCodesMapUntyped;\n\ntype UnpackPromise<T> = T extends Promise<infer U> ? U : T;\n\nexport type ErrorCodesMap<T = {}> = T extends ErrorMetaResponse\n  ? ErrorCodesMapConditionalApplicationError<T> &\n      ErrorCodesMapConditionalValidationError<T>\n  : T extends { data?: ErrorMetaResponse }\n  ? ErrorCodesMapConditionalApplicationError<NonNullable<T['data']>> &\n      ErrorCodesMapConditionalValidationError<NonNullable<T['data']>>\n  : T extends (...args: any[]) => (...args: any[]) => Promise<ErrorMetaResponse>\n  ? ErrorCodesMapConditionalApplicationError<\n      UnpackPromise<ReturnType<ReturnType<T>>>\n    > &\n      ErrorCodesMapConditionalValidationError<\n        UnpackPromise<ReturnType<ReturnType<T>>>\n      >\n  : T extends (...args: any[]) => (...args: any[]) => {\n      _?: ErrorMetaResponse;\n    }\n  ? ErrorCodesMapConditionalApplicationError<\n      UnpackPromise<NonNullable<ReturnType<ReturnType<T>>['_']>>\n    > &\n      ErrorCodesMapConditionalValidationError<\n        UnpackPromise<NonNullable<ReturnType<ReturnType<T>>['_']>>\n      >\n  : ErrorCodesMapUntyped;\n"],"mappings":"","ignoreList":[]}